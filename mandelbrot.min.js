for (var aa = "function" == typeof Object.defineProperties ? Object.defineProperty : function(a, b, c) {
  if (c.get || c.set) {
    throw new TypeError("ES3 does not support getters and setters.");
  }
  a != Array.prototype && a != Object.prototype && (a[b] = c.value);
}, e = "undefined" != typeof window && window === this ? this : "undefined" != typeof global && null != global ? global : this, f = ["Array", "prototype", "fill"], ba = 0;ba < f.length - 1;ba++) {
  var ca = f[ba];
  ca in e || (e[ca] = {});
  e = e[ca];
}
var da = f[f.length - 1], ea = e[da], fa = ea ? ea : function(a, b, c) {
  var d = this.length || 0;
  0 > b && (b = Math.max(0, d + b));
  if (null == c || c > d) {
    c = d;
  }
  c = Number(c);
  0 > c && (c = Math.max(0, d + c));
  for (b = Number(b || 0);b < c;b++) {
    this[b] = a;
  }
  return this;
};
fa != ea && null != fa && aa(e, da, {configurable:!0, writable:!0, value:fa});
var g = document.getElementById("canvas"), h = document.getElementById("scaled"), k = g.getContext("2d"), l = h.getContext("2d"), m = document.getElementById("progress"), n = m.getContext("2d"), ga = document.getElementById("offscreen"), ha = ga.getContext("2d");
m.width = 40;
m.height = 40;
m.style.top = "20px";
m.style.left = "20px";
for (var p = !1, q = null, ia = null, r = null, ja = !1, t = -2.25, u = 1.5, v = -1.5, w = 1.5, x = 200 * (u - t), y = 200 * (w - v), ka, ma, A = u - t, B = w - v, C, E, F = !1, G = null, na = null, I = 0, oa = 0, pa = 24, J = 0, qa = [], ra = 0;3 > ra;++ra) {
  for (var sa = 0;3 > sa;++sa) {
    qa[7 * (3 * ra + sa) % 9] = [sa / 3, ra / 3];
  }
}
var K = navigator.g || 4, L = Array(K), ta = 0, ua = 0, va = 2 * K, wa = 0, xa = 0, ya = 0;
function M(a, b, c) {
  za(a, b, c);
  N();
  O();
}
function Aa() {
  P ? M(0.0, 0.0, 16.0) : M(-0.75, 0.0, 16.0);
}
function za(a, b, c) {
  var d = x / y;
  A = Math.sqrt(c * d);
  B = A / d;
  t = a - A / 2;
  u = a + A / 2;
  v = b - B / 2;
  w = b + B / 2;
  C = A / x;
  E = B / y;
  pa = Ba();
}
var Ca;
try {
  new ImageData(new Uint8ClampedArray(4), 1, 1), Ca = function(a, b, c) {
    return new ImageData(a, b, c);
  };
} catch (a) {
  Ca = function(b, c, d) {
    c = k.createImageData(c, d);
    c.data.set(b);
    return c;
  };
}
function Da() {
  var a = p ? 1024 : window.innerWidth, b = p ? 768 : window.innerHeight;
  if (x != a || y != b) {
    x = a;
    y = b;
    var a = C, b = E, c = t, d = v, z = [(t + u) / 2, (v + w) / 2, A * B];
    za(z[0], z[1], z[2]);
    pa = Ba();
    N();
    ma = Math.ceil(Math.log(y) / Math.log(2));
    ka = 1 << ma;
    O();
    l.drawImage(g, 0, 0);
    g.width = x;
    g.height = y;
    k.translate((c - t) / C, (d - v) / E);
    k.scale(a / C, b / E);
    k.drawImage(h, 0, 0);
    k.setTransform(1, 0, 0, 1, 0, 0);
    h.width = x;
    h.height = y;
    ga.width = x;
    a = Ea(0, 0.5, 0.5);
    l.fillStyle = "rgb(" + a[0] + "," + a[1] + "," + a[2] + ")";
    l.fillRect(0, 0, h.width, h.height);
  }
}
function Ea(a, b, c) {
  a /= 60;
  b = c * b;
  c = b * (1 - Math.abs(a % 2 - 1));
  b = Math.floor(255.999 * b);
  c = Math.floor(255.999 * c);
  return 1.0 >= a ? [b, c, 0] : 2.0 >= a ? [c, b, 0] : 3.0 >= a ? [0, b, c] : 4.0 >= a ? [0, c, b] : 5.0 >= a ? [c, 0, b] : [b, 0, c];
}
for (var Q = new Uint8ClampedArray(1024), R = 0;256 > R;R++) {
  var Fa = Ea(360 * R / 64 % 360, 0.75 + 0.23 * Math.cos(R / 8 * Math.PI), 0.6 + 0.3 * Math.sin(R / 16 * Math.PI));
  Q[4 * R + 0] = Fa[0];
  Q[4 * R + 1] = Fa[1];
  Q[4 * R + 2] = Fa[2];
  Q[4 * R + 3] = 255;
}
function Ga(a) {
  n.fillStyle = "white";
  n.textAlign = "center";
  n.textBaseline = "middle";
  n.fillText(a, 20, 20);
}
var Ha = [];
function Ia() {
  for (var a;a = Ha.shift();) {
    var b = a[0], c = a[1], d = a[3];
    if (a[2] == ta && (0 === d ? (k.globalAlpha = 1.0, k.putImageData(Ca(c, x, 1), 0, b)) : (ha.putImageData(Ca(c, x, 1), 0, 0), k.globalAlpha = 1.0 / (d + 1), k.drawImage(ga, 0, b)), !--xa && (na = performance.now(), p))) {
      b = performance.now() - G;
      if (null === q || b < q) {
        q = b;
      }
      ia += b;
      ++r;
      a = document.createElement("div");
      c = ia / r;
      a.textContent = Math.floor(b) + " msec, average " + Math.floor(Math.round(c)) + ", min " + Math.floor(q) + " msec" + (localStorage.benchmarkReference ? " (" + Math.floor(100 * c / localStorage.benchmarkReference) + "%)" : "");
      b = document.getElementById("perf-log");
      b.appendChild(a);
      b.scrollTop = b.scrollHeight;
      O();
    }
  }
  ja && (a = xa / ya, n.clearRect(0, 0, m.width, m.height), n.fillStyle = "rgba(255,255,255,0.35)", n.beginPath(), n.moveTo(20, 20), n.arc(20, 20, 16, 1.5 * Math.PI, 1.5 * Math.PI - 2 * Math.PI * a, !0), n.fill(), Ga(0 < xa ? Math.floor(performance.now() - G) : Math.floor(na - G)));
  requestAnimationFrame(Ia);
}
requestAnimationFrame(Ia);
function Ja(a) {
  --ua;
  Ha.push(a.data);
  F && La();
}
function Ma(a) {
  for (var b = 0;b < K;++b) {
    L[b].postMessage(a);
  }
}
function Na() {
  var a = qa[J], a = [pa, ta, t + a[0] * C, C, v + a[0] * E, E, x, J];
  P && (a.push(S), a.push(T));
  Ma(null);
  Ma(a);
}
function La() {
  for (;F && ua < va;) {
    var a;
    a = void 0;
    for (var b = I, c = 0;c < ma;++c) {
      a = a << 1 | b & 1, b >>= 1;
    }
    a < y && (L[wa].postMessage(a), wa = (wa + 1) % K, ++ua);
    I = (I + 1) % ka;
    I == oa && (J + 1 < qa.length ? (++J, Na()) : F = !1);
  }
}
function Oa() {
  ++ta;
  ya = xa = y * qa.length;
  J = 0;
  Ma(null);
  F = !0;
  Na();
}
function O() {
  F ? (oa = I, Oa()) : (Oa(), La());
  G = performance.now();
}
function Ba() {
  return P ? 8192 : Math.floor(223.0 / Math.sqrt(0.001 + 2.0 * Math.min(Math.abs(A), Math.abs(B)))) + (P ? 200 : 25);
}
var Pa = !1, P = !1, S, T, Qa;
function Ra() {
  P ? (P = !1, M(S, T, Qa), Sa("Mandelbrot")) : (P = !0, S = (u + t) / 2, T = (w + v) / 2, Qa = (u - t) * (w - v), M(0.0, 0.0, 16.0), Sa("Julia"));
}
var U = !1, Ta = 0, Ua = !0;
function Va() {
  if (Ua) {
    var a = document.getElementById("toolbar");
    a.style.transitionTimingFunction = "ease-in";
    a.style.transition = "top 0.5s";
    a.style.top = -a.clientHeight + "px";
    Ta = a.clientHeight;
    Ua = !1;
  }
}
function Wa() {
  var a = document.getElementById("eye");
  U = !U;
  a.className = U ? "fa fa-eye-slash" : "fa fa-eye";
}
function Xa(a) {
  var b = g.getBoundingClientRect();
  return [a.clientX - b.left, a.clientY - b.top];
}
var Ya = !1, V = null, W = null;
g.addEventListener("mousedown", function(a) {
  a.preventDefault();
  Ya = !0;
  W = V = Xa(a);
});
g.addEventListener("mouseup", function(a) {
  a.preventDefault();
  Ya = !1;
});
Za(g, "mousemove", function(a) {
  Ya && (W = Xa(a));
  U && (a.clientY <= Ta ? Ua || (a = document.getElementById("toolbar"), a.style.transitionTimingFunction = "ease-out", a.style.top = "0px", Ua = !0) : Va());
}, function() {
  if (null !== W && null !== V) {
    var a = W[0] - V[0], b = W[1] - V[1];
    if (a || b) {
      t -= a * C, u -= a * C, v -= b * E, w -= b * E, N(), O(), k.globalAlpha = 1.0, k.drawImage(g, a, b), V = W;
    }
  }
}, 50);
document.body.addEventListener("mouseleave", function() {
  Ya = !1;
  U && Va();
});
function N() {
  var a = [(t + u) / 2, (v + w) / 2, A * B], b = {x:a[0], y:a[1], c:a[2]};
  P && (b.cx = S, b.cy = T, b.ca = Qa);
  history.replaceState("", "", "#" + Object.keys(b).map(function(a) {
    return a + "=" + b[a];
  }).join(";"));
}
for (var $a = location.hash.substr(1).split(";"), ab = null, bb = null, cb = null, db = 0;db < $a.length;++db) {
  var eb = $a[db].split("="), X = eb[0], Y = eb[1];
  "x" == X && (ab = parseFloat(Y));
  "y" == X && (bb = parseFloat(Y));
  "a" == X && (cb = parseFloat(Y));
  "cx" == X && (S = parseFloat(Y), P = !0);
  "cy" == X && (T = parseFloat(Y), P = !0);
  "ca" == X && (Qa = parseFloat(Y), P = !0);
}
null !== ab && null !== bb && null !== cb && za(ab, bb, cb);
var hb = 0, ib = null;
function Za(a, b, c, d, z) {
  function la() {
    d();
    H = null;
  }
  var D = performance.now(), H = null;
  a.addEventListener(b, function(a) {
    null !== c && c(a);
    a = performance.now();
    a < D ? null === H && (H = setTimeout(la, D - a), D += z) : (d(), D = a + z);
  });
}
Za(g, "wheel", function(a) {
  0 !== a.deltaY && (hb += a.deltaY / Math.abs(a.deltaY));
  ib = Xa(a);
}, function() {
  if (0 !== hb) {
    var a = ib, b = Math.pow(0.9, hb) - 1.0, c = a[0], d = a[1], a = t + b * c * C, z = u - b * (x - c) * C, la = v + b * d * E, b = w - b * (y - d) * E, D = z - a, H = b - la, fb = A / D, gb = B / H, c = c - c * fb, d = d - d * gb, Ka = D * H;
    1e-28 > Ka || (1e-26 > Ka && !Pa ? (Sa("Zoom limit reached"), Pa = !0) : 1e-24 < Ka && (Pa = !1), t = a, u = z, v = la, w = b, A = D, B = H, C = A / x, E = B / y, pa = Ba(), N(), O(), l.drawImage(g, 0, 0), l.translate(c, d), l.scale(fb, gb), l.drawImage(h, 0, 0), l.setTransform(1, 0, 0, 1, 0, 0), k.clearRect(0, 0, x, y));
  }
  hb = 0;
}, 50);
function Sa(a) {
  var b = document.createElement("div");
  b.textContent = a;
  b.className = "notification";
  b.style.opacity = 0.0;
  document.body.appendChild(b);
  b.offsetWidth;
  b.style.transitionTimingFunction = "ease-in";
  b.style.transition = "opacity 0.5s";
  b.style.opacity = 0.75;
  setTimeout(function() {
    b.style.transition = "opacity 1.5s";
    b.style.opacity = 0.0;
    b.addEventListener("transitionend", function() {
      document.body.removeChild(b);
    });
  }, 1500);
}
Za(window, "resize", null, Da, 100);
g.focus();
for (var Z = 0;Z < K;++Z) {
  L[Z] = new Worker("./worker.min.js?" + performance.now()), L[Z].postMessage(Q), L[Z].onmessage = Ja;
}
Da();
function jb() {
  document.fullscreenElement || document.mozFullScreenElement || document.webkitFullscreenElement ? (document.exitFullscreen && document.exitFullscreen(), document.mozCancelFullScreen ? document.mozCancelFullScreen() : document.webkitCancelFullScreen && document.webkitCancelFullScreen()) : document.body.requestFullscreen ? document.body.requestFullscreen() : document.body.webkitRequestFullScreen ? document.body.webkitRequestFullScreen() : document.body.mozRequestFullScreen && document.body.mozRequestFullScreen();
}
var mb = {f:jb, Tab:Wa, a:kb, b:function() {
  p = !p;
  q = null;
  r = ia = 0;
  for (var a = document.getElementById("perf-log");a.firstChild;) {
    a.removeChild(a.firstChild);
  }
  document.getElementById("perf-widget").style.display = p ? "block" : "none";
  Da();
  O();
}, p:lb, r:Aa, d:O, j:Ra, 1:function() {
  return M(-0.8095982407565278, 0.20644475195559692, 7.070788159271757e-21);
}, 2:function() {
  return M(-1.2507228225085063, -0.012216480572110264, 4.56763840019647e-10);
}, 3:function() {
  return M(-0.7500080414782041, -0.0023020099052026063, 1.836076329402399e-12);
}, 4:function() {
  return M(-1.2584173216052297, -0.0434307591569108, 7.355699871595511e-14);
}, 5:function() {
  return M(-1.2584173733157713, -0.04343074372030864, 1.5584579561386576e-19);
}, 6:function() {
  return M(-1.7687321374923899, -0.0033593363507216766, 1.9263389078932266e-12);
}, 7:function() {
  return M(-0.7683215625255263, 0.10763553419258395, 2.5585128336826167e-8);
}, 8:function() {
  return M(-1.192221953636638, 0.28975874758269526, 2.859831064836286e-17);
}, ArrowRight:function() {
  S += 1e-3;
  N();
  O();
}, ArrowLeft:function() {
  S -= 1e-3;
  N();
  O();
}, ArrowUp:function() {
  T += 1e-3;
  N();
  O();
}, ArrowDown:function() {
  T -= 1e-3;
  N();
  O();
}, 0:Aa};
window.addEventListener("keypress", function(a) {
  if (!(a.ctrlKey || a.shiftKey || a.altKey || a.metaKey)) {
    var b = mb[a.key];
    b && (a.preventDefault(), b());
  }
});
var nb = !1;
function kb() {
  var a = document.getElementById("about");
  nb ? (a.style.display = "none", nb = !1) : (a.style.display = "block", nb = !0);
}
document.getElementById("close-about-button").addEventListener("click", function(a) {
  a.preventDefault();
  kb();
});
function lb() {
  (ja = !ja) ? (n.clearRect(0, 0, m.width, m.height), Ga(performance.now() - G)) : n.clearRect(0, 0, m.width, m.height);
}
document.getElementById("julia-button").addEventListener("click", Ra);
document.getElementById("reset-button").addEventListener("click", Aa);
document.getElementById("fullscreen-button").addEventListener("click", jb);
document.getElementById("about-button").addEventListener("click", kb);
document.getElementById("toolbar-button").addEventListener("click", Wa);
document.getElementById("performance-button").addEventListener("click", lb);
document.getElementById("perf-set-button").addEventListener("click", function() {
  return localStorage.benchmarkReference = 0 < r ? ia / r : null;
});

