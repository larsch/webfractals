var g = null, k = 4096, m = null, n = null, p = null, q = null, r = null, t = null, u = null, v = null, w, x, y = 1.0 / Math.log(2.0), z = Math.log(0.5) * y, A = Math.log;
function B(a, f) {
  for (var d = f, b = a, c = 0, e, h;4.0 >= (e = b * b) + (h = d * d) && ++c < k;) {
    d = 2 * b * d + f, b = e - h + a;
  }
  for (var l = 0;4 > l;++l) {
    d = 2 * b * d + f, b = e - h + a, e = b * b, h = d * d;
  }
  return [c, e, h];
}
function C(a, f) {
  for (var d = 0, b, c;4.0 >= (b = a * a) + (c = f * f) && ++d < k;) {
    f = 2 * a * f + x, a = b - c + w;
  }
  for (var e = 0;4 > e;++e) {
    f = 2 * a * f + x, a = b - c + w, b = a * a, c = f * f;
  }
  return [d, b, c];
}
function D(a) {
  a = a.data;
  null !== a && (k = a[0], u = a[1], m = a[2], p = a[3], q = a[4], r = a[5], n = a[6], v = a[7], w = a[8], x = a[9], iterateFunction = void 0 === w ? B : C, t = new Uint8ClampedArray(4 * n), onmessage = E);
}
function E(a) {
  if (null === a.data) {
    onmessage = D;
  } else {
    a = a.data;
    for (var f = q + r * a, d = 0;d < n;++d) {
      var b = iterateFunction(m + p * d, f), c = b[0], e = 4 * d;
      if (c == k) {
        t[e + 0] = 0, t[e + 1] = 0, t[e + 2] = 0;
      } else {
        var b = c + (5 - z - A(A(b[1] + b[2])) * y), c = Math.floor(b), b = b - c, h = c % 256 * 4, l = 1.0 - b, c = (c + 1) % 256 * 4;
        t[e + 0] = l * g[h + 0] + b * g[c + 0];
        t[e + 1] = l * g[h + 1] + b * g[c + 1];
        t[e + 2] = l * g[h + 2] + b * g[c + 2];
      }
      t[e + 3] = 255;
    }
    postMessage([a, t, u, v]);
  }
}
onmessage = function(a) {
  g = a.data;
  onmessage = E;
};

